<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.mapper.ReplyMapper">

	<insert id="replyInsert">
	
		INSERT INTO REPLY (REP_NUM, MEM_ID, BOA_NUM, REP_CONTENT, REP_DATE_REG)
		VALUES (SEQ_REP_NUM.NEXTVAL, #{mem_id}, #{boa_num}, #{rep_content}, SYSDATE)
	
	</insert>
	
	<select id="replyList" resultType="com.demo.domain.ReplyListVO">
	
		SELECT RN, REP_NUM, MEM_ID, MEM_NAME, BOA_NUM, REP_CONTENT, REP_DATE_REG
		FROM (SELECT RN, REP_NUM, MEM_ID, MEM_NAME, BOA_NUM, REP_CONTENT, REP_DATE_REG
		      FROM (SELECT /*+ INDEX_DESC(REPLY PK_REP_NUM) */
		                   ROWNUM RN, R.REP_NUM, R.MEM_ID, M.MEM_NAME, R.BOA_NUM, R.REP_CONTENT, R.REP_DATE_REG
		            FROM REPLY R
		            LEFT JOIN MEMBER M
		            ON R.MEM_ID = M.MEM_ID
		            WHERE R.BOA_NUM = #{boa_num}))
	
	</select>

</mapper>